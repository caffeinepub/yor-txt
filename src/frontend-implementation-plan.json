{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Show public user display names on stories (remove Anonymous)",
  "requirements": [
    {
      "id": "REQ-10",
      "summary": "Display story authors using public display names with a deterministic principal-based fallback instead of rendering \"Anonymous\".",
      "acceptanceCriteria": [
        "In the story list, stories authored by users who have set a display name show that name to all viewers (authenticated or not).",
        "The UI no longer renders the literal author label \"Anonymous\" for stories; for missing profiles it renders a stable principal-based fallback (e.g., a shortened principal string).",
        "No new console errors are produced during normal story list rendering when some profiles cannot be fetched."
      ],
      "file_operations": [
        {
          "path": "frontend/src/utils/principalDisplay.ts",
          "operation": "create",
          "description": "Add a small utility to render a deterministic, human-friendly fallback label derived from a Principal string (e.g., stable shortening) for cases where no profile name is available."
        },
        {
          "path": "frontend/src/components/StoryList.tsx",
          "operation": "modify",
          "description": "Replace the hardcoded \"Anonymous\" author label with: (1) fetched public profile display name when available, else (2) the deterministic principal-based fallback (from frontend/src/utils/principalDisplay.ts). Ensure the component never renders the literal text \"Anonymous\"."
        },
        {
          "path": "frontend/src/hooks/useUserProfiles.ts",
          "operation": "modify",
          "description": "Adjust profile-fetch error handling so missing/failed profile fetches are handled quietly (returning null) without emitting console.error during normal story list rendering; keep deduplication and mapping behavior intact."
        }
      ]
    }
  ]
}